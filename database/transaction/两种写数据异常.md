## 两种写并发操作数据异常

### 脏写

| 时间 | 主事务T1      | T2            |
| ---- | ------------- | ------------- |
| t0   | W(row)-Update |               |
| t1   |               | W(row)-Update |
| t2   |               | commit        |
| t3   | ***Abort***   |               |

说明：

按照时间顺序，事务T1在t0时刻对row进行了更新操作，事务T2在t1时刻对应row进行修改，如果没有并发控制，T2对row的修改会生成新值，但T1在t3时刻回滚使得T2对row的修改失败，而T1的语义是：T1自身对row的修改失败，这就把T2修改的值回滚掉。对于事务T1而言，回滚掉了不是自己修改的数据，即事务T1发生了脏写现象。

脏写强调的时，**主事务对指定行发生回滚时，将其他事务修改的值也回滚掉**。

### 丢失更新

| 时间 | 主事务T1      | T2            |
| ---- | ------------- | ------------- |
| t0   | R(row)        |               |
| t1   |               | W(row)-Update |
| t2   | W(row)-Update |               |
| t3   | ***Commit***  |               |

说明：

按照时间顺序，T2事务在t1时刻对row进行了修改(更新)，事务T1在t2时刻对row进行了修改(更新)，如果没有并发控制，T1对row的修改会生成新值，但T1在t3时刻提交使得T2对row的修改失败。对于事务T1而言，覆盖掉了不是自己修改的数据，即事务T1上发生了丢失更新现象。